<html>

<head>
    <title>Applications ID</title>
    <meta charset="ISO-8859-1">
    <link rel="stylesheet" type="text/css" href="style/main.css">
</head>

<body>
    <div class="top_content">
        <div class="title_div">
            <h4>Tutition Reinbursement Management System</h4>
        </div>
        <div class="logout_div">
            <button class="button1" id="logout">LOGOUT </button>
        </div>

        <div class="navbar">
            <nav>
                <button id="home">Home</button> |

                <button id="account">
                    My Account</button> |

                <button id="applications">
                    Applications </button> |

                <button id="myemployee">My Employees</button> |

                <button id="events">
                    Current Events</button>
            </nav>
        </div>
    </div>
    <div class="content_wrapper">



        <div id="info_container">
            <div>
                <h3>Applications ID</h3>
            </div>
            <div id="employee_listing">
                <div class="form_container">
                    <form action="#" method="post">
                        <hr>
                        <table>

                            <tr>
                                <td>
                                    Event Name:<br>
                                    <input id="eventname" type="text" name="event_name" readonly></td>
                            </tr>
                            <tr>
                                <td>
                                    Date:<br>
                                    <input id="eventdate" type="text" name="date" readonly></td>
                            </tr>
                            <tr>
                                <td>
                                    Time:<br>
                                    <input id="eventtime" type="text" name="time" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Location:<br>
                                    <input id="eventloc" type="text" name="location" readonly></td>
                            </tr>

                            <tr>
                                <td>
                                    Event Type:<br>
                                    <input id="eventtype" type="text" name="event_type" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Cost:<br>
                                    <input id="eventcost" type="text" name="cost" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Grading Format:<br>
                                    <input id="gradeformat" type="text" name="grading_format" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    (Other):<br>
                                    <input id="newgrade" type="text" name="other_1" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Minimum Passing Grade:<br>
                                    <input id="mingrade" type="text" name="min_pass_grade" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    (Other):<br>
                                    <input id="othermin" type="text" name="other_2" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Description:<br>
                                    <textarea id="desc" name="description" readonly>

                                    </textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Justification:<br>
                                    <input id="just" type="text" name="justification" readonly>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    (Other):<br>
                                    <textarea id="otherjust" type="text" name="other_3" readonly></textarea>
                                </td>
                            </tr>
                        </table>
                        <br><br>


                        <h3>Attachments:</h3>
                        <button id="view_attach_button" class="button1">View Attachments</button>


                        <div id="view_attach" class="view_attach">

                            <!--insert/show attachment-->

                        </div>


                        <br><br>
                        <div>
                            <button class=button2 id="approve">APPROVE</button>
                            <button class="button3" id="deny">DENY</button>
                            <button class="button1">Seek More Information</button>



                        </div>



                    </form>


                </div>

            </div>
        </div>
    </div>
    <script type="text/javascript">
        var loadApplication = (application) => {
            //as creating each account div and button next to it make sure to add event listeners to the buttons and id = appId
            //let applications = document.querySelector("#applications");
            //let div = document.createElement("div");
            //let p = document.createElement("p");
            //div.id = application.applicationID;
            //p.innerText = "Event Name: "+application.eventName + " Event Date: " + application.eventDate + " Event Time: " + application.eventTime + " Application Status: " + application.requestStatus;
            //div.append(p);
            //applications.append(div);
            document.getElementById("eventname").value = application.eventName;
        }

        var getApplication = () => {
            let xhr = new XMLHttpRequest();
            console.log("in getApplications");
            xhr.onreadystatechange = () => {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.readyState + " " + xhr.status)
                    let application = JSON.parse(xhr.response);
                    console.log(application);
                    loadApplication(application);
                }
            }
            xhr.open("POST", "http://localhost:8080/TuitionReimburse/myAccount/loadApplications", true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.send("appID=" + id);
        }

        window.onload = function () {
            getApplication();
        }
    </script>
</body>

</html>